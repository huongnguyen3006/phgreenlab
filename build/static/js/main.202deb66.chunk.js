(this.webpackJsonpphgreenlab=this.webpackJsonpphgreenlab||[]).push([[0],{12:function(e,t,c){},25:function(e,t,c){},52:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(18),r=c.n(s),i=(c(25),c.p,c(12),c(26),c(27),c(20)),l=c(2),j=c(0);function b(){return Object(j.jsx)("nav",{class:"navbar navbar-expand-sm bg-info navbar-light",children:Object(j.jsxs)("div",{class:"container",children:[Object(j.jsx)("a",{class:"navbar-brand",href:"#",children:Object(j.jsx)("img",{src:"http://2.bp.blogspot.com/-CBWcgKKbM1s/VCEOmFiympI/AAAAAAAAOxo/W-fhGG-ahjY/w1200-h630-p-k-no-nu/PTN%2Bphuonghai.jpg",alt:"Logo",style:{width:70,height:50},class:"rounded-pill"})}),Object(j.jsx)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapsibleNavbar",children:Object(j.jsx)("span",{class:"navbar-toggler-icon"})}),Object(j.jsx)("div",{class:"collapse navbar-collapse",id:"collapsibleNavbar",children:Object(j.jsxs)("ul",{class:"navbar-nav",children:[Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)("a",{class:"nav-link",href:"#",children:"Home"})}),Object(j.jsx)("li",{class:"nav-item",children:Object(j.jsx)("a",{class:"nav-link",href:"/devices",children:"OMS"})}),"\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0\xa0\xa0\xa0 \xa0\xa0\xa0",Object(j.jsxs)("li",{class:"nav-item dropdown",children:[Object(j.jsx)("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown",style:{float:"right"},children:"smartpH"}),Object(j.jsxs)("ul",{class:"dropdown-menu",children:[Object(j.jsx)("li",{children:Object(j.jsx)("a",{class:"dropdown-item",href:"/signin",children:"Sign In"})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{class:"dropdown-item",href:"/signup",children:"Sign Up"})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{class:"dropdown-item",href:"/logout",children:"Log Out"})})]})]})]})})]})})}var o=c(4),d=c.n(o),h=c(19),u=c(6),O=c(3),x=c(8),p=c.n(x);function f(){p()();var e=Object(n.useState)([]),t=Object(O.a)(e,2),c=(t[0],t[1]),a=Object(n.useState)(!0),s=Object(O.a)(a,2),r=(s[0],s[1]),i=Object(n.useState)([]),l=Object(O.a)(i,2),b=l[0],o=l[1],x="https://thegreenlab.xyz";return Object(n.useEffect)(Object(u.a)(d.a.mark((function e(){var t,n,a,s,i,l,j,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x+"/Devices",{method:"GET",headers:{Authorization:"Basic aGllbkBnbWFpbC5jb206MTIz"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=[],s=0;case 8:if(!(s<n.length)){e.next=22;break}return i=n[s],l=i.SerialNumber,e.next=13,fetch("".concat(x,"/Datums/LastestDataByDevice?DeviceSerialNumber=").concat(l),{method:"GET",headers:{Authorization:"Basic aGllbkBnbWFpbC5jb206MTIz"}});case 13:return j=e.sent,e.next=16,j.json();case 16:b=e.sent,a=[].concat(Object(h.a)(a),[{device:i,deviceData:b}]),o(a);case 19:s++,e.next=8;break;case 22:c(n),r(!1);case 24:case"end":return e.stop()}}),e)}))),[]),Object(j.jsxs)("div",{className:"container mt-8",children:[Object(j.jsx)("h1",{className:"text-muted",style:{padding:20},children:" Online Monitoring System"}),Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{className:"table-dark",children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Description"}),Object(j.jsx)("td",{children:" DateSync"}),Object(j.jsx)("td",{children:"Status"}),Object(j.jsx)("td",{children:"Parameters"}),Object(j.jsx)("td",{children:"Chart"})]})}),Object(j.jsx)("tbody",{children:b.map((function(e){var t="/details?DeviceSerialNumber=".concat(e.device.SerialNumber),c="/datadetails?DeviceSerialNumber=".concat(e.device.SerialNumber);return Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:[e.device.Description," ",Object(j.jsx)("br",{}),"FriendlyName: ",e.device.FriendlyName," ",Object(j.jsx)("br",{}),"Model: ",e.device.Model," ",Object(j.jsx)("br",{}),"SerialNumber: ",e.device.SerialNumber," ",Object(j.jsx)("br",{}),"Type: ",e.device.Type," ",Object(j.jsx)("br",{}),"DeviceSerialNumber: ",e.device.LabSerialNumber]}),Object(j.jsx)("td",{type:"datetime",children:p()(e.device.DateSync).format("DD/MM/YYYY, HH:mm")}),Object(j.jsxs)("td",{children:[Object(j.jsxs)("a",{href:t,children:[" ",e.device.SerialNumber," /chartbyvalue "]})," ",Object(j.jsx)("br",{})]}),Object(j.jsx)("td",{children:e.deviceData.map((function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("span",{className:"dot",children:[e.SensorType.slice(0,4)," ",Object(j.jsx)("br",{})," ",e.Value]})})}))}),Object(j.jsxs)("td",{children:[" ",Object(j.jsx)("a",{href:c,children:"  /chartbydate "})]})]})}))})]})]})}function m(){p()();var e=Object(n.useState)(""),t=Object(O.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(null),r=Object(O.a)(s,2),i=r[0],l=r[1],b=Object(n.useState)(!0),o=Object(O.a)(b,2),h=o[0],x=o[1];return Object(n.useEffect)(Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("useeffect"),e.next=3,fetch("http://127.0.0.1:3000/Datums/StatisticData?StartDate=2021-11-01&EndDate=2021-12-31",{method:"GET",headers:{Authorization:"Basic aGllbkBnbWFpbC5jb206MTIz"}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a(c),l(n),x(h);case 10:case"end":return e.stop()}}),e)}))),[]),Object(j.jsxs)("div",{className:"container mt-2",children:[Object(j.jsx)("h2",{children:"Statistic Data"}),null!==i?Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Select a device"}),Object(j.jsxs)("select",{className:"form-select",onChange:function(){return function(){for(var e=document.querySelector("#selDevice").value,t=document.querySelectorAll(".divDevice"),c=0;c<t.length;c++)t[c].style.display="none";document.querySelector("#"+e).style.display="block"}()},id:"selDevice",children:[Object(j.jsx)("option",{children:" -- "}),i.children.map((function(e){return Object(j.jsxs)("option",{children:[e.name," "]})}))]}),Object(j.jsx)("br",{}),i.children.map((function(e){return Object(j.jsxs)("div",{style:{display:"none"},id:e.name,className:"divDevice",children:[Object(j.jsx)("h3",{className:"mb-3",children:e.name}),e.children.map((function(e){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h4",{style:{color:"darkblue"},children:e.name}),Object(j.jsxs)("table",{className:"table mt3",children:[Object(j.jsxs)("tr",{class:"table-info",children:[Object(j.jsx)("td",{rowSpan:"1",children:"Date"}),Object(j.jsx)("td",{style:{textAlign:"left"},children:"Avg"}),Object(j.jsx)("td",{style:{textAlign:"left"},children:"Min"}),Object(j.jsx)("td",{style:{textAlign:"left"},children:"Max"})]}),e.children.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.name}),Object(j.jsx)("td",{style:{textAlign:"left"},children:Math.round(e.children[0].AVG)}),Object(j.jsx)("td",{style:{textAlign:"left"},children:Math.floor(e.children[0].MIN)}),Object(j.jsx)("td",{style:{textAlign:"left"},children:Math.floor(e.children[0].MAX)})]})}))]})]})}))]})}))]}):"Loading"]})}var v=c(10),g=c.n(v),S=c(11),y=c.n(S);function D(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),c=(t[0],t[1],Object(n.useState)("")),a=Object(O.a)(c,2),s=(a[0],a[1],Object(n.useState)([])),r=Object(O.a)(s,2),i=r[0],l=r[1],b=Object(n.useState)(""),o=Object(O.a)(b,2),h=o[0],x=o[1],f=Object(n.useState)(""),m=Object(O.a)(f,2),v=m[0],S=m[1],D=Object(n.useState)([]),w=Object(O.a)(D,2),N=w[0],M=w[1];function A(){return new Date}function k(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)}Object(n.useEffect)(Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(k(new Date(A().getTime()-2592e6))),S(k(A()));case 2:case"end":return e.stop()}}),e)}))),[]);var T=function(){var e=Object(u.a)(d.a.mark((function e(){var t,c,n,a,s,r,i,j,b,o,u,O,x;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.search,c=new URLSearchParams(t),n=c.get("DeviceSerialNumber"),a="".concat("https://thegreenlab.xyz","/Datums/StatisticDataByDevice?DeviceSerialNumber=").concat(n,"&StartDate=").concat(h,"&EndDate=").concat(v),e.next=6,fetch(a,{method:"GET",headers:{Authorization:"Basic aGllbkBnbWFpbC5jb206MTIz"}});case 6:return s=e.sent,e.next=9,s.json();case 9:for(r=e.sent,console.log(r),l(r),i=[],j=0;j<r.length;j++){for(b=r[j],o=[],u=0;u<b.data.length;u++)o.push(b.data[u].AVG);for(O=[],u=0;u<b.data.length;u++)O.push(b.data[u].MIN);for(x=[],u=0;u<b.data.length;u++)x.push(b.data[u].MAX);i.push({chart:{type:"spline"},title:{text:b.sensorType},series:[{name:"Avg",data:o},{name:"Min",data:O},{name:"Max",data:x}]})}M(i);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Details"}),Object(j.jsx)("label",{children:"From date:"}),Object(j.jsx)("input",{type:"date",value:h,onChange:function(e){return x(e.target.value)}}),Object(j.jsx)("label",{children:"To date:"}),Object(j.jsx)("input",{type:"date",value:v,onChange:function(e){return S(e.target.value)}}),Object(j.jsx)("button",{onClick:function(){return T()},children:"Show"}),Object(j.jsx)("div",{className:"table-chart",children:i.map((function(e,t){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{children:e.sensorType}),Object(j.jsxs)("table",{className:"table table-hover",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:"Date"}),Object(j.jsx)("td",{children:"Avg"}),Object(j.jsx)("td",{children:"Min"}),Object(j.jsx)("td",{children:"Max"})]})}),Object(j.jsx)("tbody",{children:e.data.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:p()(e.DateOnly).format("YYYY-MM-DD")}),Object(j.jsx)("td",{children:Math.round(100*e.AVG)/100}),Object(j.jsx)("td",{children:Math.round(100*e.MIN,2)/100}),Object(j.jsx)("td",{children:Math.round(100*e.MAX,2)/100})]})}))})]}),Object(j.jsx)(y.a,{highcharts:g.a,options:N[t]})]})}))})]})}var w=c(7);function N(){var e=Object(w.useState)(""),t=Object(O.a)(e,2),c=t[0],n=(t[1],Object(w.useState)("")),a=Object(O.a)(n,2),s=a[0],r=(a[1],Object(w.useState)([])),i=Object(O.a)(r,2),l=(i[0],i[1]),b="http://127.0.0.1:3000";function o(){return o=Object(u.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+"/Users/Auth/Login",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic dnZAZ21haWwuY29tOjEyMzQ1Ng=="},body:JSON.stringify({Email:c,psassword:s})});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n).then((function(e){return l(e)})).then((function(e){sessionStorage.setItem("base64",e.hash),window.location.reload()}));case 7:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}return Object(j.jsxs)("div",{className:"signin",children:[Object(j.jsx)("h1",{style:{textAlign:"center",fontFamily:"inherit",color:"grey",fontWeight:"bold",fontSize:"40px"},children:"Sign In"})," ",Object(j.jsx)("br",{}),Object(j.jsx)("label",{children:"Email:"})," ",Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",placeholder:"email"}),Object(j.jsx)("label",{children:"Password:"}),Object(j.jsx)("input",{type:"password",placeholder:"password"})," ",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{type:"button",onClick:function(){return function(){return o.apply(this,arguments)}()},children:"Sign In"})," ",Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("a",{style:{fontWeight:"normal"},href:"/forgotpassword",children:"Forgot Password"})," \xa0\xa0\xa0",Object(j.jsx)("a",{style:{fontWeight:"normal"},href:"/signup",children:"Sign Up"})]})}function M(){return Object(j.jsx)("div",{children:Object(j.jsx)(y.a,{highcharts:g.a,options:{chart:{type:"spline"},title:{text:"My chart"},series:[{data:[1,2,1,4,3,6]}]}})})}function A(){var e=Object(w.useState)([]),t=Object(O.a)(e,2),c=(t[0],t[1],Object(w.useState)([])),a=Object(O.a)(c,2),s=(a[0],a[1],Object(w.useState)([0])),r=Object(O.a)(s,2),i=(r[0],r[1],Object(w.useState)("")),l=Object(O.a)(i,2),b=(l[0],l[1],Object(w.useState)([])),o=Object(O.a)(b,2),h=o[0],x=o[1],p=Object(w.useState)(""),f=Object(O.a)(p,2),m=(f[0],f[1],Object(w.useState)([])),v=Object(O.a)(m,2),S=v[0],D=v[1];Object(n.useEffect)(Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M();case 1:case"end":return e.stop()}}),e)}))),[]);var N=function(){var e=Object(u.a)(d.a.mark((function e(t){var c,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="https://thegreenlab.xyz/Devices/Search?SerialNumber=".concat(t),e.next=3,fetch(c,{method:"GET",headers:{Authorization:"Basic aGllbkBnbWFpbC5jb206MTIz"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(d.a.mark((function e(){var t,c,n,a,s,r,i,l,j,b,o,h,u,O,p,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.search,c=new URLSearchParams(t),n=c.get("DeviceSerialNumber"),e.next=5,N(n);case 5:a=e.sent,D(a.Sensors),s=[],r=0;case 9:if(!(r<a.Sensors.length)){e.next=28;break}return i=a.Sensors[r],l="".concat("https://thegreenlab.xyz","/Datums/Last7Days?DeviceSerialNumber=").concat(n,"&SensorType=").concat(i.SensorType),e.next=14,fetch(l,{method:"GET",headers:{Authorization:"Basic aGllbkBnbWFpbC5jb206MTIz"}});case 14:return j=e.sent,e.next=17,j.json();case 17:for(b=e.sent,o=i.SensorType,h=b[0].Unit,u=[],O=0;O<b.length;O++)u.push(b[O].Value);for(p=[],f=0;f<b.length;f++)p.push(b[f].ReceivedDate.substr(0,16));s.push({chart:{type:"spline"},title:{text:o},series:[{name:o,data:u}],xAxis:{categories:p},yAxis:{title:{text:h}}});case 25:r++,e.next=9;break;case 28:x(s);case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{children:[Object(j.jsx)("h4",{children:"Lastest 7 Days Data "}),S.map((function(e,t){return Object(j.jsx)("div",{children:Object(j.jsx)(y.a,{highcharts:g.a,options:h[t]})})}))]})}var k=function(){return Object(j.jsxs)(i.a,{children:[Object(j.jsx)(b,{}),Object(j.jsxs)("div",{children:[Object(j.jsx)(l.c,{children:Object(j.jsx)(l.a,{path:"/signin",caseSensitive:!1,element:Object(j.jsx)(N,{})})}),Object(j.jsx)(l.c,{children:Object(j.jsx)(l.a,{path:"/devices",caseSensitive:!1,element:Object(j.jsx)(f,{})})}),Object(j.jsx)(l.c,{children:Object(j.jsx)(l.a,{path:"/datadetails",caseSensitive:!1,element:Object(j.jsx)(A,{})})}),Object(j.jsx)(l.c,{children:Object(j.jsx)(l.a,{path:"/details",caseSensitive:!1,element:Object(j.jsx)(D,{})})}),Object(j.jsx)(l.c,{children:Object(j.jsx)(l.a,{path:"/statistic",caseSensitive:!1,element:Object(j.jsx)(m,{})})}),Object(j.jsx)(l.c,{children:Object(j.jsx)(l.a,{path:"/chart",caseSensitive:!1,element:Object(j.jsx)(M,{})})})]})]})},T=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,53)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root")),T()}},[[52,1,2]]]);
//# sourceMappingURL=main.202deb66.chunk.js.map